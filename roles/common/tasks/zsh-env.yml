---
- name: Setup zsh Environment
  block:
  
  - name: Include gantsign.oh-my-zsh role
    ansible.builtin.include_role:
      name: gantsign.oh-my-zsh
    vars:
      users:
        - username: "{{ zsh_user }}"
  
  - name: Edit .zshrc
    copy:
      src: "{{ role_path }}/files/zshrc"
      dest: "{{ ansible_env.HOME }}/.zshrc"
      mode: '0644'
  
  
#  - name: Install and configure zsh plugins


  - name: Install PowerLevel10k
    ansible.builtin.command: git clone --depth=1 https://github.com/romkatv/powerlevel10k.git "{{ ansible_env.HOME }}/.oh-my-zsh/custom/themes/powerlevel10k"
  
  - name: Configure PowerLevel10k
    copy:
      src: "{{ role_path }}/files/p10k.zsh"
      dest: "{{ ansible_env.HOME }}"
      mode: '0644'